version: '3.8'

services:
  analytics_engine:
    build: .
    container_name: neoglobal_engine
    volumes:
      # 1. CODE: Maps your internal Mac project folder to /app
      - .:/app
      
      # 2. DATA (Stream A/B): Maps SSD raw_data to /mnt/ssd_raw
      - /Volumes/Samsung SSD/.docker_infra/persistent_volumes/neoglobal_integrity/raw_data/:/mnt/ssd_raw/
      
      # 3. WAREHOUSE (DuckDB): Maps SSD warehouse to /mnt/ssd_warehouse
      - /Volumes/Samsung SSD/.docker_infra/persistent_volumes/neoglobal_integrity/warehouse/:/mnt/ssd_warehouse/
      
    environment:
      - PYTHONUNBUFFERED=1
      # Explicitly tell dbt and Python where to find the SSD data
      - DATA_PATH_RAW=/mnt/ssd_raw
      - DATA_PATH_WAREHOUSE=/mnt/ssd_warehouse
      
    stdin_open: true
    tty: true